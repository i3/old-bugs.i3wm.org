<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #550 (i3bar systray displays gaps and icons partially cover the status text)
     – i3 window manager
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="/report/search" />
        <link rel="prev" href="/report/ticket/549" title="Ticket #549" />
        <link rel="last" href="/report/ticket/1444" title="Ticket #1444" />
        <link rel="help" href="/report/wiki/TracGuide" />
        <link rel="alternate" href="/report/ticket/550?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="/report/ticket/550?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="/report/ticket/550?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="/report/ticket/551" title="Ticket #551" />
        <link rel="start" href="/report/wiki" />
        <link rel="stylesheet" href="/report/chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="/report/chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="/report/ticket/1" title="Ticket #1" />
        <link rel="shortcut icon" href="/report/chrome/common/favicon.png" type="image/png" />
        <link rel="icon" href="/report/chrome/common/favicon.png" type="image/png" />
      <link type="application/opensearchdescription+xml" rel="search" href="/report/search/opensearch" title="Search i3 window manager" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="08442b88ef92f8636f350f4a";
      var comments_prefs={"comments_only":"false","comments_order":"oldest"};
    </script>
      <script type="text/javascript" charset="utf-8" src="/report/chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="/report/chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="/report/chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="/report/chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="/report/chrome/common/js/folding.js"></script>
      <script type="text/javascript" charset="utf-8" src="/report/chrome/common/js/wikitoolbar.js"></script>
      <script type="text/javascript" charset="utf-8" src="/report/chrome/common/js/resizer.js"></script>
      <script type="text/javascript" charset="utf-8" src="/report/chrome/common/js/auto_preview.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $(".trac-autofocus").focus();
        $(".trac-target-new").attr("target", "_blank");
        setTimeout(function() { $(".trac-scroll").scrollToTop() }, 1);
        $(".trac-disable-on-submit").disableOnSubmit();
      });
    </script>
    <script type="text/javascript" src="/report/chrome/common/js/threaded_comments.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
      /*<![CDATA[*/
        $("#attachments").toggleClass("collapsed");
        $("#trac-up-attachments").click(function () {
          $("#attachments").removeClass("collapsed");
          return true;
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
        function setRevertHandler() {
          $("button.trac-revert").click(function() {
            var div = $("div", this);
            var field_name = div[0].id.substr(7);
            var field_value = div.text();
            var input = $("#propertyform *[name=field_" + field_name + "]");
            if (input.length > 0) {
              if (input.filter("input[type=radio]").length > 0) {
                input.val([field_value]);
              } else if (input.filter("input[type=checkbox]").length > 0) {
                input.val(field_value == "1" ? [field_value] : []);
              } else {
                input.val(field_value);
              }
            } else { // Special case for CC checkbox
              input = $("#propertyform input[name=cc_update]").val([]);
            }
            input.change();
            $(this).closest("li").remove();
            return false;
          });
        }
        setRevertHandler();
        var comment_focused = false;
        $("#comment").focus(function() { comment_focused = true; })
                     .blur(function() { comment_focused = false; });
        $("#propertyform").autoSubmit({preview: '1'}, function(data, reply) {
          var items = $(reply);
          // Update ticket box
          $("#ticket").replaceWith(items.filter('#ticket'));
          // Unthread, unrevert and update changelog
          if (!$('#trac-comments-oldest').checked())
            $('#trac-comments-oldest').click().change();
          $("#changelog").replaceWith(items.filter("#changelog"));
          if ($('#trac-comments-only-toggle').attr('checked'))
            $('#trac-comments-only-toggle').click().attr('checked', true);
          // Show warning
          var new_changes = $("#changelog .trac-new");
          $("#trac-edit-warning").toggle(new_changes.length != 0);
          if (new_changes.length != 0)
            $("#changelog").parent().show().removeClass("collapsed");
          // Update view time
          $("#propertyform input[name='view_time']").replaceWith(items.filter("input[name='view_time']"));
          // Update preview
          var preview = $("#ticketchange").html(items.filter('#preview').children());
          var show_preview = preview.children().length != 0;
          $("#ticketchange").toggle(show_preview);
          setRevertHandler();
          // Collapse property form if comment editor has focus
          if (show_preview && comment_focused)
            $("#modify").parent().addClass("collapsed");
        }, "#ticketchange .trac-loading");
        $("#trac-comment-editor").autoSubmit({preview_comment: '1'}, function(data, reply) {
          var comment = $("#trac-comment-editor").next("div.comment").html(reply);
          comment.toggle(comment.children().length != 0);
        }, "#changelog .trac-loading");
        /*]]>*/
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="/report/wiki/TracIni#header_logo-section"><img src="/chrome/common/logo_bugs.png" alt="(i3 logo)" height="62" width="65" /></a>
      </div>
      <form id="search" action="/report/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="/report/login">Login</a></li><li><a href="/report/prefs">Preferences</a></li><li class="last"><a href="/report/about">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="/report/timeline">Timeline</a></li><li class="active"><a href="/report/report">View Tickets</a></li><li class="last"><a href="/report/search">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
        <ul>
          <li class="first"><span>&larr; <a class="prev" href="/report/ticket/549" title="Ticket #549">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="/report/ticket/551" title="Ticket #551">Next Ticket</a> &rarr;</span></li>
        </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
        <div id="ticket" class="trac-content ">
  <div class="date">
    <p>Opened <a class="timeline" href="/report/timeline?from=2011-10-31T23%3A30%3A40%2B01%3A00&amp;precision=second" title="See timeline at 10/31/11 23:30:40">3 years ago</a></p>
    <p>Closed <a class="timeline" href="/report/timeline?from=2012-09-24T23%3A10%3A39%2B02%3A00&amp;precision=second" title="See timeline at 09/24/12 23:10:39">3 years ago</a></p>
  </div>
  <h2>
    <a href="/report/ticket/550" class="trac-id">#550</a>
    <span class="trac-status">
      <a href="/report/query?status=closed">closed</a>
    </span>
    <span class="trac-type">
      <a href="/report/query?status=!closed&amp;type=defect">defect</a>
    </span>
    <span class="trac-resolution">
      (<a href="/report/query?status=closed&amp;resolution=reporter_inactive">reporter_inactive</a>)
    </span>
  </h2>
  <h1 id="trac-ticket-title" class="searchable">
    <span class="summary">i3bar systray displays gaps and icons partially cover the status text</span>
  </h1>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">isolin.chip@…</td>
      <th id="h_owner" class="missing">Owned by:</th>
      <td headers="h_owner"></td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="/report/query?status=!closed&amp;priority=minor">minor</a>
        </td>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="/report/query?status=!closed&amp;component=i3bar">i3bar</a>
        </td>
    </tr><tr>
        <th id="h_version">
          Version:
        </th>
        <td headers="h_version">
              <a href="/report/query?status=!closed&amp;version=4.0">4.0</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
              <a href="/report/query?status=!closed&amp;keywords=~systray">systray</a>
        </td>
    </tr><tr>
        <th id="h_cc" class="missing">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_reprod">
          Is it reproducible?:
        </th>
        <td headers="h_reprod">
              <a href="/report/query?status=!closed&amp;reprod=Always">Always</a>
        </td>
    </tr><tr>
        <th id="h_gitversion">
          git version:
        </th>
        <td headers="h_gitversion">
              fb4b012013dab6d2d58efe41243017529a4ef33e
        </td>
        <th id="h_os">
          Operating system:
        </th>
        <td headers="h_os">
              <a href="/report/query?status=!closed&amp;os=Linux">Linux</a>
        </td>
    </tr><tr>
        <th id="h_app" class="missing">
          X11 program:
        </th>
        <td headers="h_app">
        </td>
        <th id="h_distri">
          Distribution / flavor:
        </th>
        <td headers="h_distri">
              Ubuntu
        </td>
    </tr><tr>
        <th id="h_ircnick">
          Your IRC nick:
        </th>
        <td headers="h_ircnick">
              IsoLnCHiP
        </td>
        <th class="missing">
        </th>
        <td>
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
i3 4.0.2-release, with i3bar from git fb4b012013dab6d2d58efe41243017529a4ef33e<br />
</p>
<p>
According to a first diagnosis of the problem, the gaps are likely icons which aren't providing grafics for the currently set fontsize. Changing the fontsize to a significantly larger fontsize didnt change the existance of gaps. Neither stalonetray, xfce-panel nor gnome-panel display any extra icons and also do not seem to allocate any extra space for icons in contrast to i3bar.<br />
</p>
<p>
Probably related problem: Icons bleed over into the statustext (in my case the clock is entirely covered). Its hard to judge whether there is a direct correlation between the space produced by the gaps and the space bleeding over into the text, but it could be the same amount.<br />
</p>

    </div>
  </div>
</div>
          
    <div id="attachments">
        <h3 class="foldable">Attachments <span class="trac-count">(3)</span></h3>
        <div class="attachments">
          <dl class="attachments">
              <dt>
    <a href="/report/attachment/ticket/550/tray.png" title="View attachment">tray.png</a><a href="/report/raw-attachment/ticket/550/tray.png" class="trac-rawlink" title="Download">​</a>
       (<span title="4344 bytes">4.2 KB</span>) -
      added by <em>anonymous</em> <a class="timeline" href="/report/timeline?from=2011-10-31T23%3A31%3A12%2B01%3A00&amp;precision=second" title="See timeline at 10/31/11 23:31:12">3 years ago</a>.
  </dt>
              <dt>
    <a href="/report/attachment/ticket/550/i3bar.log" title="View attachment">i3bar.log</a><a href="/report/raw-attachment/ticket/550/i3bar.log" class="trac-rawlink" title="Download">​</a>
       (<span title="24576 bytes">24.0 KB</span>) -
      added by <em>anonymous</em> <a class="timeline" href="/report/timeline?from=2011-10-31T23%3A31%3A35%2B01%3A00&amp;precision=second" title="See timeline at 10/31/11 23:31:35">3 years ago</a>.
  </dt>
              <dt>
    <a href="/report/attachment/ticket/550/2012-01-07-184956_3600x1080_scrot.png" title="View attachment">2012-01-07-184956_3600x1080_scrot.png</a><a href="/report/raw-attachment/ticket/550/2012-01-07-184956_3600x1080_scrot.png" class="trac-rawlink" title="Download">​</a>
       (<span title="53819 bytes">52.6 KB</span>) -
      added by <em>Raphael Michel &lt;raphael@…&gt;</em> <a class="timeline" href="/report/timeline?from=2012-01-07T18%3A55%3A40%2B01%3A00&amp;precision=second" title="See timeline at 01/07/12 18:55:40">3 years ago</a>.
  </dt>
          </dl>
          <p>
            Download all attachments as: <a rel="nofollow" href="/report/zip-attachment/ticket/550/">.zip</a>
          </p>
          
        </div>
    </div>

        <div>
          <div style="position: relative">
            <form id="prefs" method="get" action="/report/prefs" style="position: absolute; right: 0">
              <div id="trac-comments-order">
                <input type="radio" id="trac-comments-oldest" name="trac-comments-order" value="oldest" checked="checked" />
                <label for="trac-comments-oldest">Oldest first</label>
                <input type="radio" id="trac-comments-newest" name="trac-comments-order" value="newest" />
                <label for="trac-comments-newest">Newest first</label>
                <span id="trac-threaded-toggle" style="display: none">
                  <input type="radio" id="trac-comments-threaded" name="trac-comments-order" value="threaded" />
                  <label for="trac-comments-threaded">Threaded</label>
                </span>
              </div>
              <div>
                <input id="trac-comments-only-toggle" type="checkbox" />
                <label for="trac-comments-only-toggle">Comments only</label>
              </div>
            </form>
          </div>
          <h3 class="foldable">Change History <span class="trac-count">(19)</span></h3>
          <div id="changelog">
              <div class="change">
                
  <h3 class="change">
    <span class="threading">
    </span>
        Changed <a class="timeline" href="/report/timeline?from=2011-10-31T23%3A31%3A12%2B01%3A00&amp;precision=second" title="See timeline at 10/31/11 23:31:12">3 years ago</a> by anonymous
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-attachment">
      <strong class="trac-field-attachment">Attachment</strong>
        <a href="/report/attachment/ticket/550/tray.png"><em>tray.png</em></a><a href="/report/raw-attachment/ticket/550/tray.png" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>

              </div>
              <div class="change">
                
  <h3 class="change">
    <span class="threading">
    </span>
        Changed <a class="timeline" href="/report/timeline?from=2011-10-31T23%3A31%3A35%2B01%3A00&amp;precision=second" title="See timeline at 10/31/11 23:31:35">3 years ago</a> by anonymous
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-attachment">
      <strong class="trac-field-attachment">Attachment</strong>
        <a href="/report/attachment/ticket/550/i3bar.log"><em>i3bar.log</em></a><a href="/report/raw-attachment/ticket/550/i3bar.log" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>

              </div>
              <div class="change" id="trac-change-1-1320877015968514">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:1" class="cnum">
    <a href="#comment:1">comment:1</a>
  </span>
    </span>
        Changed <a class="timeline" href="/report/timeline?from=2011-11-09T23%3A16%3A55%2B01%3A00&amp;precision=second" title="See timeline at 11/09/11 23:16:55">3 years ago</a> by isolin.chip@…
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I think I have narrowed it down to blueman-applet and guake. I started i3 with a brand new useraccount, used as minimal a config file as possible to get the tray display.<br />
</p>
<p>
Started guake, the tray icon shows up properly and displaces the status text correctly. Quit it. Started blueman-applet, no icon appears, no text movement. Started guake again, text is displaced by the amount of one icon, however an empty gap appears and the guake icon then covers the status text.<br />
</p>
<p>
Used kupfer for comparison. blueman and kupfer play nicely (except again blueman not showing up).<br />
</p>
<p>
What gets really odd, is changing around the order in which the three are started:<br />
</p>
<p>
guake, kupfer, blueman: icon, icon, gap (text covered)<br />
kupfer, guake, blueman: icon, icon, gap (text covered)<br />
</p>
<p>
when I forgot to restart i3 after kupfer, guake, blueman, I got this:<br />
blueman, kupfer, guake: icon, gap, icon, gap (text covered)<br />
</p>
<p>
blueman, kupfer, guake: icon, icon (no text covered)<br />
blueman, guake, kupfer: icon, icon (no text covered), then same session, killed all three procs, start guake, icon, gap(covered), kill, start kupfer: icon, nogap (not covered), start guake: icon, icon, nogap (not covered)<br />
</p>
<p>
No idea if this is usefull in any way other than documenting how confusing I find this behaviour ;)<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2-1320881109824426">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:2" class="cnum">
    <a href="#comment:2">comment:2</a>
  </span>
    </span>
        Changed <a class="timeline" href="/report/timeline?from=2011-11-10T00%3A25%3A09%2B01%3A00&amp;precision=second" title="See timeline at 11/10/11 00:25:09">3 years ago</a> by michael
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-resolution">
      <strong class="trac-field-resolution">Resolution</strong>
        set to <em>fixed</em>
    </li><li class="trac-field-status">
      <strong class="trac-field-status">Status</strong>
        changed from <em>new</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      <p>
Fixed in e85a352fcf13c342de75c56c73fac0f95c1d822b, thanks.<br />
</p>

    </div>

              </div>
              <div class="change">
                
  <h3 class="change">
    <span class="threading">
    </span>
        Changed <a class="timeline" href="/report/timeline?from=2012-01-07T18%3A55%3A40%2B01%3A00&amp;precision=second" title="See timeline at 01/07/12 18:55:40">3 years ago</a> by Raphael Michel &lt;raphael@…&gt;
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-attachment">
      <strong class="trac-field-attachment">Attachment</strong>
        <a href="/report/attachment/ticket/550/2012-01-07-184956_3600x1080_scrot.png"><em>2012-01-07-184956_3600x1080_scrot.png</em></a><a href="/report/raw-attachment/ticket/550/2012-01-07-184956_3600x1080_scrot.png" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>

              </div>
              <div class="change" id="trac-change-3-1325959025703852">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:3" class="cnum">
    <a href="#comment:3">comment:3</a>
  </span>
    </span>
        Changed <a class="timeline" href="/report/timeline?from=2012-01-07T18%3A57%3A05%2B01%3A00&amp;precision=second" title="See timeline at 01/07/12 18:57:05">3 years ago</a> by Raphael Michel &lt;raphael@…&gt;
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
This is marked as fixed but for me it isn't (see attached screenshot). I'm using the latest debian package build on Ubuntu.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4-1325959529986449">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:4" class="cnum">
    <a href="#comment:4">comment:4</a>
  </span>
    </span>
        Changed <a class="timeline" href="/report/timeline?from=2012-01-07T19%3A05%3A29%2B01%3A00&amp;precision=second" title="See timeline at 01/07/12 19:05:29">3 years ago</a> by michael
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Please never say "the latest version". That could mean anything :). Please nopaste the output of i3bar --version and i3 --version instead.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5-1325959640608565">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:5" class="cnum">
    <a href="#comment:5">comment:5</a>
  </span>
    </span>
        Changed <a class="timeline" href="/report/timeline?from=2012-01-07T19%3A07%3A20%2B01%3A00&amp;precision=second" title="See timeline at 01/07/12 19:07:20">3 years ago</a> by Raphael Michel &lt;raphael@…&gt;
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
$ i3 --version<br />
i3 version 4.1.1-146-g0e1b1dd (2012-01-07, branch "next") © 2009-2011 Michael Stapelberg and contributors<br />
$ i3bar --version<br />
i3bar version 4.1.1-146-g0e1b1dd (2012-01-07, branch "next") © 2010-2011 Axel Wagner and contributors<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6-1325959998971074">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:6" class="cnum">
    <a href="#comment:6">comment:6</a>
  </span>
    </span>
        Changed <a class="timeline" href="/report/timeline?from=2012-01-07T19%3A13%3A18%2B01%3A00&amp;precision=second" title="See timeline at 01/07/12 19:13:18">3 years ago</a> by michael
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Thanks. Do you have a way to reproduce it? With which applications does it happen?<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7-1325960467696806">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:7" class="cnum">
    <a href="#comment:7">comment:7</a>
  </span>
    </span>
        Changed <a class="timeline" href="/report/timeline?from=2012-01-07T19%3A21%3A07%2B01%3A00&amp;precision=second" title="See timeline at 01/07/12 19:21:07">3 years ago</a> by Raphael Michel &lt;raphael@…&gt;
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I remember it happening every day, so it is reproducable but I don't know which parts of my system configuration are responsible for it.<br />
The applications I use on daily basis and which are using tray icons, are:<br />
</p>
<ul><li>IBus
</li><li>an tray applet for switching between keyboard layouts from gnome (don't know the name)
</li><li>Skype
</li><li>Pidgin
</li><li>Ario
</li><li><a class="forbidden wiki" title="no permission to view this wiki page">NetworkManager</a>
</li></ul><p>
The number and position of the gaps seems to vary. Since the screenshot 20 minutes ago I restarted i3 in place. The order of the icons has changed and there is one gap left, on the right side of <a class="forbidden wiki" title="no permission to view this wiki page">NetworkManager</a> (nm-applet). If I restart i3 the icons stay in those positions.<br />
So as far as I can see the gaps are always near the <a class="forbidden wiki" title="no permission to view this wiki page">NetworkManager</a> applet, but I'm not sure about this.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8-1326323514490303">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:8" class="cnum">
    <a href="#comment:8">comment:8</a>
  </span>
    </span>
        Changed <a class="timeline" href="/report/timeline?from=2012-01-12T00%3A11%3A54%2B01%3A00&amp;precision=second" title="See timeline at 01/12/12 00:11:54">3 years ago</a> by fernandotcl
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-resolution">
      <strong class="trac-field-resolution">Resolution</strong>
        <em>fixed</em> deleted
    </li><li class="trac-field-status">
      <strong class="trac-field-status">Status</strong>
        changed from <em>closed</em> to <em>new</em>
    </li>
  </ul>
    <div class="comment searchable">
      <p>
I found an easy and somewhat consistent way to reproduce this with i3bar + nm-applet, so reopening:<br />
</p>
<p>
1) Connect an HDMI cable to my laptop, connect the other end to a TV<br />
2) xrandr --output HDMI1 --right-of LVDS1<br />
3) Focus other output, play around, launch some clients<br />
4) xrandr --output LVDS1 --off<br />
5) xrandr --output LVDS1 --auto<br />
6) xrandr --output HDMI1 --off<br />
</p>
<p>
Then you get an i3bar with no nm-applet. nm-applet is not running anymore, but the space it used to take up in i3bar is now empty, hasn't been reclaimed.<br />
</p>
<p>
I guess nm-applet quitting could be explained as the tray was (possibly?) unmapped when I disabled LVDS1 the first time. Then I believe caching could explain why those pixels aren't reclaimed. Does this make sense at all?<br />
</p>
<p>
Regards,<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9-1327715833338905">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:9" class="cnum">
    <a href="#comment:9">comment:9</a>
  </span>
    </span>
        Changed <a class="timeline" href="/report/timeline?from=2012-01-28T02%3A57%3A13%2B01%3A00&amp;precision=second" title="See timeline at 01/28/12 02:57:13">3 years ago</a> by fernandotcl
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
It looks like I always get an empty slot in the tray area when I run gnome-settings-daemon, so this might be another way to reproduce it.<br />
</p>
<p>
Regards,<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10-1327746296981152">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:10" class="cnum">
    <a href="#comment:10">comment:10</a>
  </span>
    </span>
        Changed <a class="timeline" href="/report/timeline?from=2012-01-28T11%3A24%3A56%2B01%3A00&amp;precision=second" title="See timeline at 01/28/12 11:24:56">3 years ago</a> by michael
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Thanks for the hint, fernando. I pushed a fix for this, can you please verify that it works for you, too? If so, does the fix also eliminate the problems of your previous comment?<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11-1327769845158351">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:11" class="cnum">
    <a href="#comment:11">comment:11</a>
  </span>
    </span>
        Changed <a class="timeline" href="/report/timeline?from=2012-01-28T17%3A57%3A25%2B01%3A00&amp;precision=second" title="See timeline at 01/28/12 17:57:25">3 years ago</a> by fernandotcl
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hi, the gnome-settings-daemon issue is indeed fixed, but the other issue is still happening. I think it's a different issue, possibly a pixmap caching issue, but I'm not sure. I also checked, it happens when I use VGA1 instead of HDMI1 too.<br />
</p>
<p>
Maybe the problem is that the cached status line pixmap isn't invalidated when the tray icon disappears if the screen to which the cached pixmap is associated isn't present. So nm-applet disappears while LVDS1 is off, and then the space isn't reclaimed. But this is a wild, wild guess, I haven't looked at the multihead code in i3bar at all.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12-1327978185907604">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:12" class="cnum">
    <a href="#comment:12">comment:12</a>
  </span>
    </span>
        Changed <a class="timeline" href="/report/timeline?from=2012-01-31T03%3A49%3A45%2B01%3A00&amp;precision=second" title="See timeline at 01/31/12 03:49:45">3 years ago</a> by Alex V. Koval &lt;alex@…&gt;
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hi,<br />
</p>
<p>
I am not sure if my problem is related to this bug, but here it is. Every time when<br />
I connect or disconnect the external monitor, part of my applications disapper.<br />
The problem is still reproduced with -next branch with last comment from <br />
Sun Jan 29 20:07:19 2012 -0200.<br />
</p>
<p>
How to reproduce. My external monitor connects as:<br />
</p>
<p>
avk@avk-v131-2 ~/src/i3 $ cat ~/bin/dsp_only_hdmi                                  04:42:18<br />
#!/bin/bash<br />
xrandr --output HDMI1 --auto --primary --output LVDS1 --off<br />
set-desktop-wallpaper<br />
</p>
<p>
My external monitor disconnects as:<br />
</p>
<p>
avk@avk-v131-2 ~/src/i3 $ cat ~/bin/dsp_laptop                                     04:42:27<br />
#!/bin/bash<br />
xrandr --output HDMI1 --off --output VGA1 --off --output LVDS1 --auto<br />
set-desktop-wallpaper<br />
</p>
<p>
My tray icons list:<br />
avk@avk-v131-2 ~/src/i3 $ cat ~/.tray-progs                                        04:42:56<br />
skype pidgin wicd-client dropbox parcellite<br />
avk@avk-v131-2 ~/src/i3 $   <br />
</p>
<p>
After switch of monitor the following happens:<br />
</p>
<p>
So:<br />
</p>
<blockquote>
<p>
1) Skype stays on<br />
2) pidgin stays on only on screen, tray icon disappears. If pidgin is iconized,<br />
</p>
<blockquote>
<p>
I can not get it on screen again because there are no control for it, so have to kill<br />
&amp; restart.<br />
</p>
</blockquote>
<p>
3) wicd-client disappears, and even if it was on screen during<br />
</p>
<blockquote>
<p>
screen change it would exit<br />
</p>
</blockquote>
<p>
4) dropbox exits as well.<br />
</p>
</blockquote>
<p>
Some log file debug info during this event:<br />
</p>
<hr />
<p>
01/31/2012 04:47:03 AM - Checking window 0x01a00073 (class Pidgin)<br />
01/31/2012 04:47:03 AM - dock status does not match<br />
01/31/2012 04:47:03 AM - workspace visible? fs = 0x14baf40, ws = 0x14baf40<br />
01/31/2012 04:47:12 AM - startup id = i3/dmenu_run/20259-2-avk-v131-2_TIME155628125<br />
01/31/2012 04:47:12 AM - executing: dmenu_run -fn '-xos4-*-bold-*-*-*-16-*-*-*-*-*-iso10646-1' -nb '<a class="missing ticket">#222222</a>' -sf '<a class="missing ticket">#00</a>ff00' -sb '<a class="missing ticket">#050505</a>' -nf "#ffffff"<br />
01/31/2012 04:47:12 AM - Not a managed window, ignoring <a class="forbidden wiki" title="no permission to view this wiki page">UnmapNotify</a> event<br />
01/31/2012 04:47:18 AM - WM_NAME changed to "avk@avk-v131-2:~/src/i3 | 92x20 | pts/8  "<br />
01/31/2012 04:47:18 AM - Using legacy window title. Note that in order to get Unicode window titles in i3, the application has to set _NET_WM_NAME (UTF-8)<br />
01/31/2012 04:47:27 AM - WM_NAME changed to "avk@avk-v131-2:~/src/i3 | 92x20 | pts/8  tail -f  ~/.i3/logfile &gt; ~/tmp/log1"<br />
01/31/2012 04:47:27 AM - Using legacy window title. Note that in order to get Unicode window titles in i3, the application has to set _NET_WM_NAME (UTF-8)<br />
01/31/2012 04:47:29 AM - startup id = i3/dmenu_run/20259-3-avk-v131-2_TIME155644901<br />
01/31/2012 04:47:29 AM - executing: dmenu_run -fn '-xos4-*-bold-*-*-*-16-*-*-*-*-*-iso10646-1' -nb '<a class="missing ticket">#222222</a>' -sf '<a class="missing ticket">#00</a>ff00' -sb '<a class="missing ticket">#050505</a>' -nf "#ffffff"<br />
01/31/2012 04:47:29 AM - Not a managed window, ignoring <a class="forbidden wiki" title="no permission to view this wiki page">UnmapNotify</a> event<br />
01/31/2012 04:47:32 AM - Checking window 0x00a00007 (class i3bar)<br />
01/31/2012 04:47:32 AM - dock status does not match<br />
01/31/2012 04:47:32 AM - Checking window 0x00a00007 (class i3bar)<br />
01/31/2012 04:47:32 AM - window id does not match<br />
01/31/2012 04:47:32 AM - Checking window 0x00a00007 (class i3bar)<br />
01/31/2012 04:47:32 AM - window id does not match<br />
01/31/2012 04:47:32 AM - Checking window 0x00a00007 (class i3bar)<br />
01/31/2012 04:47:32 AM - window id does not match<br />
01/31/2012 04:47:32 AM - Checking window 0x00a00007 (class i3bar)<br />
01/31/2012 04:47:32 AM - window id does not match<br />
01/31/2012 04:47:32 AM - Checking window 0x00a00007 (class i3bar)<br />
01/31/2012 04:47:32 AM - window id does not match<br />
01/31/2012 04:47:32 AM - Checking window 0x00a00007 (class i3bar)<br />
01/31/2012 04:47:32 AM - dock status matches<br />
01/31/2012 04:47:32 AM - Not a managed window, ignoring <a class="forbidden wiki" title="no permission to view this wiki page">UnmapNotify</a> event<br />
01/31/2012 04:47:32 AM - ERROR: X11 Error received! sequence 0x298c, error_code = 4<br />
01/31/2012 04:47:32 AM - ERROR: X11 Error received! sequence 0x298d, error_code = 13<br />
01/31/2012 04:47:32 AM - Not a managed window, ignoring <a class="forbidden wiki" title="no permission to view this wiki page">UnmapNotify</a> event<br />
01/31/2012 04:47:32 AM - ERROR: X11 Error received! sequence 0x298f, error_code = 4<br />
01/31/2012 04:47:32 AM - ERROR: X11 Error received! sequence 0x2990, error_code = 13<br />
01/31/2012 04:47:32 AM - Not a managed window, ignoring <a class="forbidden wiki" title="no permission to view this wiki page">UnmapNotify</a> event<br />
01/31/2012 04:47:32 AM - ERROR: X11 Error received! sequence 0x2992, error_code = 4<br />
01/31/2012 04:47:32 AM - ERROR: X11 Error received! sequence 0x2993, error_code = 13<br />
01/31/2012 04:47:32 AM - Not a managed window, ignoring <a class="forbidden wiki" title="no permission to view this wiki page">UnmapNotify</a> event<br />
01/31/2012 04:47:32 AM - ERROR: X11 Error received! sequence 0x2995, error_code = 4<br />
01/31/2012 04:47:32 AM - ERROR: X11 Error received! sequence 0x2996, error_code = 13<br />
01/31/2012 04:47:32 AM - workspace visible? fs = 0x14baf40, ws = 0x14baf40<br />
01/31/2012 04:47:32 AM - workspace visible? fs = 0x14baf40, ws = 0x14bbdf0<br />
01/31/2012 04:47:32 AM - workspace visible? fs = 0x14baf40, ws = 0x14bca30<br />
01/31/2012 04:47:32 AM - workspace visible? fs = 0x14baf40, ws = 0x14bcec0<br />
01/31/2012 04:47:32 AM - workspace visible? fs = 0x14baf40, ws = 0x14baf40<br />
01/31/2012 04:47:32 AM - workspace visible? fs = 0x14baf40, ws = 0x14bbdf0<br />
01/31/2012 04:47:32 AM - workspace visible? fs = 0x14baf40, ws = 0x14bca30<br />
01/31/2012 04:47:32 AM - workspace visible? fs = 0x14baf40, ws = 0x14bcec0<br />
01/31/2012 04:47:32 AM - workspace visible? fs = 0x14baf40, ws = 0x14baf40<br />
01/31/2012 04:47:32 AM - workspace visible? fs = 0x14baf40, ws = 0x14bbdf0<br />
01/31/2012 04:47:32 AM - workspace visible? fs = 0x14baf40, ws = 0x14bca30<br />
01/31/2012 04:47:32 AM - workspace visible? fs = 0x14baf40, ws = 0x14bcec0<br />
01/31/2012 04:47:32 AM - WM_CLASS changed to i3bar (instance), i3bar (class)<br />
01/31/2012 04:47:32 AM - WM_NAME changed to "i3bar for output LVDS1"<br />
01/31/2012 04:47:32 AM - Using legacy window title. Note that in order to get Unicode window titles in i3, the application has to set _NET_WM_NAME (UTF-8)<br />
01/31/2012 04:47:32 AM - This window is of type dock<br />
01/31/2012 04:47:32 AM - Checking window 0x00a0000e (class i3bar)<br />
01/31/2012 04:47:32 AM - dock status does not match<br />
01/31/2012 04:47:32 AM - Checking window 0x00a0000e (class i3bar)<br />
01/31/2012 04:47:32 AM - window id does not match<br />
01/31/2012 04:47:32 AM - Checking window 0x00a0000e (class i3bar)<br />
01/31/2012 04:47:32 AM - window id does not match<br />
01/31/2012 04:47:32 AM - Checking window 0x00a0000e (class i3bar)<br />
01/31/2012 04:47:32 AM - window id does not match<br />
01/31/2012 04:47:32 AM - Checking window 0x00a0000e (class i3bar)<br />
01/31/2012 04:47:32 AM - window id does not match<br />
01/31/2012 04:47:32 AM - Checking window 0x00a0000e (class i3bar)<br />
01/31/2012 04:47:32 AM - window id does not match<br />
01/31/2012 04:47:32 AM - Checking window 0x00a0000e (class i3bar)<br />
01/31/2012 04:47:32 AM - dock status matches<br />
01/31/2012 04:47:32 AM - Not a managed window, ignoring <a class="forbidden wiki" title="no permission to view this wiki page">UnmapNotify</a> event<br />
01/31/2012 04:47:32 AM - expose event for unknown window, ignoring<br />
01/31/2012 04:47:32 AM - Not a managed window, ignoring <a class="forbidden wiki" title="no permission to view this wiki page">UnmapNotify</a> event<br />
01/31/2012 04:47:32 AM - Not a managed window, ignoring <a class="forbidden wiki" title="no permission to view this wiki page">UnmapNotify</a> event<br />
01/31/2012 04:47:32 AM - ERROR: X11 Error received! sequence 0x2b88, error_code = 3<br />
01/31/2012 04:47:32 AM - Not a managed window, ignoring <a class="forbidden wiki" title="no permission to view this wiki page">UnmapNotify</a> event<br />
01/31/2012 04:47:32 AM - Not a managed window, ignoring <a class="forbidden wiki" title="no permission to view this wiki page">UnmapNotify</a> event<br />
Has notifications support True<br />
Loading...<br />
Connecting to daemon...<br />
Connected.<br />
displaytray True<br />
Done loading.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13-1328305774362508">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:13" class="cnum">
    <a href="#comment:13">comment:13</a>
  </span>
    </span>
        Changed <a class="timeline" href="/report/timeline?from=2012-02-03T22%3A49%3A34%2B01%3A00&amp;precision=second" title="See timeline at 02/03/12 22:49:34">3 years ago</a> by Alex V. Koval &lt;alex@…&gt;
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Please note, that with connection of external display my PRIMARY display does change:<br />
</p>
<p>
#!/bin/bash<br />
xrandr --output HDMI1 --auto --primary --output LVDS1 --off<br />
set-desktop-wallpaper<br />
</p>
<p>
may be this will help you to reproduce the problem?<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-14-1329120062807288">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:14" class="cnum">
    <a href="#comment:14">comment:14</a>
  </span>
    </span>
        Changed <a class="timeline" href="/report/timeline?from=2012-02-13T09%3A01%3A02%2B01%3A00&amp;precision=second" title="See timeline at 02/13/12 09:01:02">3 years ago</a> by pkordy@…
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
For me the space appears always when I use bluetooth-applet but only if I lunch it after some other icon is already in the tray. E. g. if I lunch parcellite and then bluetooth-applet I have space in between. Space stays even after killing bluetooth-applet. If I start bluetooth-applet and then parcellite I have no space in between. I use i3 version 4.1.2 (2012-01-27, branch "release-4.1.2")<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-15-1335120924576651">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:15" class="cnum">
    <a href="#comment:15">comment:15</a>
  </span>
    </span>
        Changed <a class="timeline" href="/report/timeline?from=2012-04-22T20%3A55%3A24%2B02%3A00&amp;precision=second" title="See timeline at 04/22/12 20:55:24">3 years ago</a> by michael
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-status">
      <strong class="trac-field-status">Status</strong>
        changed from <em>new</em> to <em>infoneeded_new</em>
    </li>
  </ul>
    <div class="comment searchable">
      <p>
Can you please check if this still happens in commit 17b477d25d0acad41bde5ac8c23abc849da815c8 of the 'next' branch?<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-16-1348521039329928">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:16" class="cnum">
    <a href="#comment:16">comment:16</a>
  </span>
    </span>
        Changed <a class="timeline" href="/report/timeline?from=2012-09-24T23%3A10%3A39%2B02%3A00&amp;precision=second" title="See timeline at 09/24/12 23:10:39">3 years ago</a> by michael
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-resolution">
      <strong class="trac-field-resolution">Resolution</strong>
        set to <em>reporter_inactive</em>
    </li><li class="trac-field-status">
      <strong class="trac-field-status">Status</strong>
        changed from <em>infoneeded_new</em> to <em>closed</em>
    </li>
  </ul>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="/report/wiki/TracTickets">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="/report/ticket/550?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="/report/ticket/550?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="/report/ticket/550?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="/report/chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="/report/about"><strong>Trac 1.0.2</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right"><a href="http://i3wm.org/">http://i3wm.org</a></p>
    </div>
  </body>
</html>